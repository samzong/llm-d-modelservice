{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "properties": {
    "accelerator": {
      "additionalProperties": false,
      "description": " Supported types: nvidia, intel-i915, intel-xe, intel-gaudi, amd, google",
      "properties": {
        "env": {
          "additionalProperties": false,
          "description": "Environment variables specific to accelerator types",
          "properties": {
            "intel-i915": {
              "items": {
                "anyOf": [
                  {
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "default": "VLLM_USE_V1",
                        "required": [],
                        "title": "name",
                        "type": "string"
                      },
                      "value": {
                        "default": "1",
                        "required": [],
                        "title": "value",
                        "type": "string"
                      }
                    },
                    "required": [],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "default": "TORCH_LLM_ALLREDUCE",
                        "required": [],
                        "title": "name",
                        "type": "string"
                      },
                      "value": {
                        "default": "1",
                        "required": [],
                        "title": "value",
                        "type": "string"
                      }
                    },
                    "required": [],
                    "type": "object"
                  },
                  {
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "default": "VLLM_WORKER_MULTIPROC_METHOD",
                        "required": [],
                        "title": "name",
                        "type": "string"
                      },
                      "value": {
                        "default": "spawn",
                        "required": [],
                        "title": "value",
                        "type": "string"
                      }
                    },
                    "required": [],
                    "type": "object"
                  }
                ],
                "required": []
              },
              "required": [],
              "title": "intel-i915",
              "type": "array"
            }
          },
          "required": [],
          "title": "env",
          "type": "object"
        },
        "resources": {
          "additionalProperties": false,
          "description": "Resource names for different accelerator types",
          "properties": {
            "amd": {
              "default": "amd.com/gpu",
              "required": [],
              "title": "amd",
              "type": "string"
            },
            "google": {
              "default": "google.com/tpu",
              "required": [],
              "title": "google",
              "type": "string"
            },
            "intel-gaudi": {
              "default": "habana.ai/gaudi",
              "required": [],
              "title": "intel-gaudi",
              "type": "string"
            },
            "intel-i915": {
              "default": "gpu.intel.com/i915",
              "required": [],
              "title": "intel-i915",
              "type": "string"
            },
            "intel-xe": {
              "default": "gpu.intel.com/xe",
              "required": [],
              "title": "intel-xe",
              "type": "string"
            },
            "nvidia": {
              "default": "nvidia.com/gpu",
              "required": [],
              "title": "nvidia",
              "type": "string"
            }
          },
          "required": [],
          "title": "resources",
          "type": "object"
        },
        "type": {
          "default": "nvidia",
          "description": "Type of accelerator to use",
          "required": [],
          "title": "type",
          "type": "string"
        }
      },
      "required": [],
      "title": "accelerator"
    },
    "common": {
      "additionalProperties": true,
      "description": "Common configuration values",
      "required": [],
      "title": "common"
    },
    "decode": {
      "additionalProperties": true,
      "description": "Decode pod configuration",
      "properties": {
        "acceleratorTypes": {
          "additionalProperties": false,
          "description": "Only an option for LWS (multinode) subGroupExclusiveToplogy: true XPU-specific node affinity",
          "properties": {
            "labelKey": {
              "default": "",
              "required": [],
              "title": "labelKey",
              "type": "string"
            },
            "labelValues": {
              "description": " items:   type: string @schema",
              "items": {
                "required": [],
                "type": "string"
              },
              "required": [],
              "title": "labelValues"
            }
          },
          "required": [],
          "title": "acceleratorTypes"
        },
        "autoscaling": {
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "default": false,
              "required": [],
              "title": "enabled",
              "type": "boolean"
            }
          },
          "required": [],
          "title": "autoscaling",
          "type": "object"
        },
        "containers": {
          "description": " type: array items:   type: object   additionalProperties: true @schema",
          "items": {
            "additionalProperties": true,
            "required": [],
            "type": "object"
          },
          "required": [],
          "title": "containers",
          "type": "array"
        },
        "create": {
          "default": true,
          "required": [],
          "title": "create",
          "type": "boolean"
        },
        "monitoring": {
          "additionalProperties": true,
          "description": " additionalProperties: true @schema Monitoring configuration for decode pods",
          "properties": {
            "podmonitor": {
              "additionalProperties": false,
              "description": "PodMonitor configuration for Prometheus Operator",
              "properties": {
                "annotations": {
                  "additionalProperties": false,
                  "description": "Additional annotations to be added to the PodMonitor",
                  "required": [],
                  "title": "annotations"
                },
                "enabled": {
                  "default": "false",
                  "description": "Create PodMonitor resource for decode deployment",
                  "required": [],
                  "title": "enabled"
                },
                "interval": {
                  "default": "30s",
                  "description": "Interval at which metrics should be scraped",
                  "required": [],
                  "title": "interval"
                },
                "labels": {
                  "additionalProperties": false,
                  "description": "Timeout after which the scrape is ended scrapeTimeout: \"10s\" labels -- Additional labels to be added to the PodMonitor",
                  "required": [],
                  "title": "labels"
                },
                "metricRelabelings": {
                  "description": "MetricRelabelConfigs to apply to samples before ingestion",
                  "items": {
                    "required": []
                  },
                  "required": [],
                  "title": "metricRelabelings"
                },
                "path": {
                  "default": "/metrics",
                  "description": "HTTP path to scrape metrics from",
                  "required": [],
                  "title": "path"
                },
                "portName": {
                  "default": "metrics",
                  "description": "Port name to scrape metrics from (must match container port name)",
                  "required": [],
                  "title": "portName"
                },
                "relabelings": {
                  "description": "RelabelConfigs to apply to samples before scraping",
                  "items": {
                    "required": []
                  },
                  "required": [],
                  "title": "relabelings"
                }
              },
              "required": [],
              "title": "podmonitor",
              "type": "object"
            }
          },
          "required": [],
          "title": "monitoring"
        },
        "replicas": {
          "default": 1,
          "required": [],
          "title": "replicas",
          "type": "integer"
        },
        "volumes": {
          "description": " type: array items:   type: object   additionalProperties: true @schema",
          "items": {
            "additionalProperties": true,
            "required": [],
            "type": "object"
          },
          "required": [],
          "title": "volumes",
          "type": "array"
        }
      },
      "required": [],
      "title": "decode"
    },
    "dra": {
      "additionalProperties": true,
      "description": " additionalProperties: true @schema",
      "properties": {
        "claimTemplates": {
          "items": {
            "anyOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "class": {
                    "default": "gpu.nvidia.com",
                    "required": [],
                    "title": "class",
                    "type": "string"
                  },
                  "count": {
                    "default": 1,
                    "required": [],
                    "title": "count",
                    "type": "integer"
                  },
                  "match": {
                    "default": "exactly",
                    "required": [],
                    "title": "match",
                    "type": "string"
                  },
                  "name": {
                    "default": "nvidia",
                    "required": [],
                    "title": "name",
                    "type": "string"
                  },
                  "selectors": {
                    "items": {
                      "required": []
                    },
                    "required": [],
                    "title": "selectors",
                    "type": "array"
                  }
                },
                "required": [],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "class": {
                    "default": "tpu.google.com",
                    "required": [],
                    "title": "class",
                    "type": "string"
                  },
                  "count": {
                    "default": 1,
                    "required": [],
                    "title": "count",
                    "type": "integer"
                  },
                  "match": {
                    "default": "exactly",
                    "required": [],
                    "title": "match",
                    "type": "string"
                  },
                  "name": {
                    "default": "google",
                    "required": [],
                    "title": "name",
                    "type": "string"
                  },
                  "selectors": {
                    "items": {
                      "required": []
                    },
                    "required": [],
                    "title": "selectors",
                    "type": "array"
                  }
                },
                "required": [],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "class": {
                    "default": "gpu.intel.com",
                    "required": [],
                    "title": "class",
                    "type": "string"
                  },
                  "count": {
                    "default": 1,
                    "required": [],
                    "title": "count",
                    "type": "integer"
                  },
                  "match": {
                    "default": "exactly",
                    "required": [],
                    "title": "match",
                    "type": "string"
                  },
                  "name": {
                    "default": "intel",
                    "required": [],
                    "title": "name",
                    "type": "string"
                  },
                  "selectors": {
                    "items": {
                      "required": []
                    },
                    "required": [],
                    "title": "selectors",
                    "type": "array"
                  }
                },
                "required": [],
                "type": "object"
              },
              {
                "additionalProperties": false,
                "properties": {
                  "class": {
                    "default": "gpu.amd.com",
                    "required": [],
                    "title": "class",
                    "type": "string"
                  },
                  "count": {
                    "default": 1,
                    "required": [],
                    "title": "count",
                    "type": "integer"
                  },
                  "match": {
                    "default": "exactly",
                    "required": [],
                    "title": "match",
                    "type": "string"
                  },
                  "name": {
                    "default": "amd",
                    "required": [],
                    "title": "name",
                    "type": "string"
                  },
                  "selectors": {
                    "items": {
                      "required": []
                    },
                    "required": [],
                    "title": "selectors",
                    "type": "array"
                  }
                },
                "required": [],
                "type": "object"
              }
            ],
            "required": []
          },
          "required": [],
          "title": "claimTemplates",
          "type": "array"
        },
        "enabled": {
          "default": false,
          "required": [],
          "title": "enabled",
          "type": "boolean"
        },
        "type": {
          "default": "nvidia",
          "required": [],
          "title": "type",
          "type": "string"
        }
      },
      "required": [],
      "title": "dra"
    },
    "enabled": {
      "default": "true",
      "description": "Usually used when using llm-d-modelservice as a subchart",
      "required": [],
      "title": "enabled"
    },
    "extraObjects": {
      "description": "Extra objects to be deployed alongside the main application",
      "items": {
        "required": [],
        "type": "object"
      },
      "required": [],
      "title": "extraObjects"
    },
    "fullnameOverride": {
      "default": "",
      "description": "String to fully override common.names.fullname",
      "required": [],
      "title": "fullnameOverride"
    },
    "global": {
      "additionalProperties": false,
      "description": "Global configuration",
      "properties": {
        "imageRegistry": {
          "default": "ghcr.io",
          "description": "Global image registry override. If set, replaces the registry part of all images.",
          "required": [],
          "title": "imageRegistry"
        }
      },
      "required": [],
      "title": "global"
    },
    "modelArtifacts": {
      "additionalProperties": false,
      "description": "Name of the scheduler to use for scheduling model pods schedulerName: default-scheduler",
      "properties": {
        "authSecretName": {
          "default": "",
          "description": "name of secret containing credentials for accessing the model (e.g., HF_TOKEN)",
          "required": [],
          "title": "authSecretName",
          "type": "string"
        },
        "labels": {
          "additionalProperties": false,
          "description": " These should match the labels of any associated InferencePool In addition, the label llm-d.ai/role will be added with the value 'prefill' or 'decode' depending on the role of the pod.",
          "properties": {
            "llm-d.ai/inferenceServing": {
              "default": "true",
              "required": [],
              "title": "llm-d.ai/inferenceServing",
              "type": "string"
            },
            "llm-d.ai/model": {
              "default": "random_model",
              "required": [],
              "title": "llm-d.ai/model",
              "type": "string"
            }
          },
          "required": [],
          "title": "labels"
        },
        "mountPath": {
          "default": "/model-cache",
          "description": "location where model volume will be mounted (used when mountModelVolume: true)",
          "required": [],
          "title": "mountPath",
          "type": "string"
        },
        "name": {
          "default": "random/model",
          "description": " Required",
          "required": [],
          "title": "name"
        },
        "size": {
          "default": "5Mi",
          "description": "size of volume to create to hold the model",
          "required": [],
          "title": "size",
          "type": "string"
        },
        "uri": {
          "default": "hf://{{ .Values.modelArtifacts.name }}",
          "description": "   hf://model/name - model as defined on Hugging Face   pvc://pvc_name/path/to/model - model on existing persistant storage volume   oci:// not yet supported",
          "required": [],
          "title": "uri"
        }
      },
      "required": [],
      "title": "modelArtifacts"
    },
    "multinode": {
      "default": false,
      "description": "When true, a LeaderWorkerSet is used instead of a Deployment",
      "required": [],
      "title": "multinode",
      "type": "boolean"
    },
    "prefill": {
      "additionalProperties": true,
      "description": " additionalProperties: true @schema Prefill pod configuation",
      "properties": {
        "acceleratorTypes": {
          "additionalProperties": false,
          "description": "Only an option for LWS (multinode) subGroupExclusiveToplogy: true XPU-specific node affinity",
          "properties": {
            "labelKey": {
              "default": "",
              "required": [],
              "title": "labelKey",
              "type": "string"
            },
            "labelValues": {
              "description": " items:   type: string @schema",
              "items": {
                "required": [],
                "type": "string"
              },
              "required": [],
              "title": "labelValues"
            }
          },
          "required": [],
          "title": "acceleratorTypes"
        },
        "autoscaling": {
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "default": false,
              "required": [],
              "title": "enabled",
              "type": "boolean"
            }
          },
          "required": [],
          "title": "autoscaling",
          "type": "object"
        },
        "containers": {
          "description": " type: array items:   type: object   additionalProperties: true @schema",
          "items": {
            "additionalProperties": true,
            "required": [],
            "type": "object"
          },
          "required": [],
          "title": "containers",
          "type": "array"
        },
        "create": {
          "default": true,
          "required": [],
          "title": "create",
          "type": "boolean"
        },
        "monitoring": {
          "additionalProperties": true,
          "description": " additionalProperties: true @schema Monitoring configuration for prefill pods",
          "properties": {
            "podmonitor": {
              "additionalProperties": false,
              "description": "PodMonitor configuration for Prometheus Operator",
              "properties": {
                "annotations": {
                  "additionalProperties": false,
                  "description": "Additional annotations to be added to the PodMonitor",
                  "required": [],
                  "title": "annotations"
                },
                "enabled": {
                  "default": "false",
                  "description": "Create PodMonitor resource for prefill deployment",
                  "required": [],
                  "title": "enabled"
                },
                "interval": {
                  "default": "30s",
                  "description": "Interval at which metrics should be scraped",
                  "required": [],
                  "title": "interval"
                },
                "labels": {
                  "additionalProperties": false,
                  "description": "Timeout after which the scrape is ended scrapeTimeout: \"10s\" labels -- Additional labels to be added to the PodMonitor",
                  "required": [],
                  "title": "labels"
                },
                "metricRelabelings": {
                  "description": "MetricRelabelConfigs to apply to samples before ingestion",
                  "items": {
                    "required": []
                  },
                  "required": [],
                  "title": "metricRelabelings"
                },
                "path": {
                  "default": "/metrics",
                  "description": "HTTP path to scrape metrics from",
                  "required": [],
                  "title": "path"
                },
                "portName": {
                  "default": "metrics",
                  "description": "Port name to scrape metrics from (must match container port name)",
                  "required": [],
                  "title": "portName"
                },
                "relabelings": {
                  "description": "RelabelConfigs to apply to samples before scraping",
                  "items": {
                    "required": []
                  },
                  "required": [],
                  "title": "relabelings"
                }
              },
              "required": [],
              "title": "podmonitor",
              "type": "object"
            }
          },
          "required": [],
          "title": "monitoring"
        },
        "replicas": {
          "default": 0,
          "required": [],
          "title": "replicas",
          "type": "integer"
        },
        "volumes": {
          "description": " type: array items:   type: object   additionalProperties: true @schema",
          "items": {
            "additionalProperties": true,
            "required": [],
            "type": "object"
          },
          "required": [],
          "title": "volumes",
          "type": "array"
        }
      },
      "required": [],
      "title": "prefill"
    },
    "requester": {
      "additionalProperties": true,
      "description": "Requester configuration part of the dual-pod solution for FMA",
      "properties": {
        "adminPort": {
          "default": 8081,
          "required": [],
          "title": "adminPort",
          "type": "integer"
        },
        "enable": {
          "default": false,
          "required": [],
          "title": "enable",
          "type": "boolean"
        },
        "image": {
          "default": "ghcr.io/llm-d-incubation/llm-d-fast-model-actuation-requester:latest",
          "required": [],
          "title": "image",
          "type": "string"
        },
        "port": {
          "additionalProperties": false,
          "properties": {
            "probes": {
              "default": 8080,
              "required": [],
              "title": "probes",
              "type": "integer"
            },
            "spi": {
              "default": 8081,
              "required": [],
              "title": "spi",
              "type": "integer"
            }
          },
          "required": [],
          "title": "port",
          "type": "object"
        },
        "readinessProbe": {
          "additionalProperties": false,
          "properties": {
            "initialDelaySeconds": {
              "default": 2,
              "required": [],
              "title": "initialDelaySeconds",
              "type": "integer"
            },
            "periodSeconds": {
              "default": 5,
              "required": [],
              "title": "periodSeconds",
              "type": "integer"
            }
          },
          "required": [],
          "title": "readinessProbe",
          "type": "object"
        },
        "resources": {
          "additionalProperties": false,
          "properties": {
            "limits": {
              "additionalProperties": false,
              "properties": {
                "cpus": {
                  "default": 1,
                  "required": [],
                  "title": "cpus",
                  "type": "integer"
                },
                "gpus": {
                  "default": 1,
                  "required": [],
                  "title": "gpus",
                  "type": "integer"
                },
                "memory": {
                  "default": "250Mi",
                  "required": [],
                  "title": "memory",
                  "type": "string"
                }
              },
              "required": [],
              "title": "limits",
              "type": "object"
            }
          },
          "required": [],
          "title": "resources",
          "type": "object"
        }
      },
      "required": [],
      "title": "requester"
    },
    "routing": {
      "additionalProperties": false,
      "description": " also describes elements for Gateway API Inference Extension configuration",
      "properties": {
        "proxy": {
          "additionalProperties": true,
          "description": " additionalProperties: true @schema Configuration of VLLM routing sidecar cf. https://github.com/llm-d/llm-d-routing-sidecar/",
          "properties": {
            "connector": {
              "default": "nixlv2",
              "description": "Specify a conenctor. For example, `nixl`, `nixlv2`",
              "required": [],
              "title": "connector",
              "type": "string"
            },
            "enabled": {
              "default": true,
              "required": [],
              "title": "enabled",
              "type": "boolean"
            },
            "image": {
              "default": "ghcr.io/llm-d/llm-d-routing-sidecar:v0.3.0",
              "required": [],
              "title": "image",
              "type": "string"
            },
            "imagePullPolicy": {
              "default": "Always",
              "required": [],
              "title": "imagePullPolicy",
              "type": "string"
            },
            "secure": {
              "default": false,
              "description": "Boolean: adds the `--secure-proxy` flag to the routingSidecar with your chosen value.  Arg is ommitted by default for compatability with legacy sidecar images.",
              "required": [],
              "title": "secure",
              "type": "boolean"
            },
            "targetPort": {
              "default": 8200,
              "description": "target port on which VLLM should listen",
              "required": [],
              "title": "targetPort",
              "type": "integer"
            }
          },
          "required": [],
          "title": "proxy"
        },
        "servicePort": {
          "default": "8000",
          "description": " modelName: random/modelId port the inference engine (vLLM) listens when a sidecar (proxy) is used it will listen on this port and forward to VLLM on proxy.targetPort",
          "required": [],
          "title": "servicePort"
        }
      },
      "required": [],
      "title": "routing"
    },
    "serviceAccountOverride": {
      "default": "",
      "description": "Override to default pod serviceAccountName",
      "required": [],
      "title": "serviceAccountOverride"
    }
  },
  "required": [],
  "type": "object"
}
